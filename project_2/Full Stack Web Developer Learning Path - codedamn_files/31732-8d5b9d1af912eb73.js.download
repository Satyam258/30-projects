(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[31732],{4269:function(e,t,a){"use strict";var n,l;a.d(t,{$:function(){return n}}),(l=n||(n={})).CourseItem="CourseItem",l.DebugcodeAi="DebugcodeAi",l.PlaygroundSnippet="PlaygroundSnippet",l.PracticeProblem="PracticeProblem",l.Project="Project",l.Unknown="Unknown",l.UserOnboarding="UserOnboarding",l.FermionSchoolChatArea="FermionSchoolChatArea"},50148:function(e,t,a){"use strict";a.d(t,{b:function(){return X}});var n,l,r,s,i=a(97458),o=a(52983),d=a(26667),c=a(96197),u=a(27365),m=a(93334),h=a(93467);a(74224),a(86841);var g=a(14517),p=a(35527),y=a(63601),x=a(33182),f=a(72688),b=a(75130),v=a(87942),w=a(78949),k=a(3384),j=a(42016),D=a(96230),N=a(49335);let S="service",T="previous-room-ids-for-ai-chat",C="".concat(S,"-").concat(T),A=e=>({context:{namespace:S,functionName:T},data:e}),U=async e=>{let t;let a=A(e),n=(0,N.R9)()||null,l=(0,N.Qv)()||null,r=(0,D.gc)()||null;try{t=await k.ZP.request({method:"POST",baseURL:(0,j.hV)(),data:{organizationId:n,fermionSchoolId:l,authToken:r,data:[a]}}).then(e=>e.data).then(e=>{var t;return(null===(t=e.at(0))||void 0===t?void 0:t.output)||null})}catch(e){throw{errorMessage:(null==e?void 0:e.message)||"Something went wrong while making this request. Please try again or contact support@codedamn.com",isNetworkError:!0}}if(!t)throw{errorMessage:"Something went wrong while making this request. Please try again or contact support@codedamn.com",isNetworkError:!1};if("ok"===t.status)return t.data;throw{...t,isNetworkError:!1}},E=async e=>{let{data:t,forceOverrideAuthToken:a,shouldEnableBatching:n=!0}=e;if(!n)return await U(t);{let e=A(t),n=(0,j.NZ)(t),l=(0,N.R9)()||null,r=(0,N.Qv)()||null,s=a||(0,D.gc)()||null;return await j.CX.fetch({batchingUniqueKey:n,organizationId:l,fermionSchoolId:r,authToken:s,data:e}).then(e=>e)}},M=(e,t)=>(0,w.a)({queryKey:[C,A(e)],queryFn:()=>E({data:e}),...null!=t?t:{}}),P="service",I="existing-room-ai-chat-from-room-id";"".concat(P,"-").concat(I);let R=e=>({context:{namespace:P,functionName:I},data:e}),z=async e=>{let t;let a=R(e),n=(0,N.R9)()||null,l=(0,N.Qv)()||null,r=(0,D.gc)()||null;try{t=await k.ZP.request({method:"POST",baseURL:(0,j.hV)(),data:{organizationId:n,fermionSchoolId:l,authToken:r,data:[a]}}).then(e=>e.data).then(e=>{var t;return(null===(t=e.at(0))||void 0===t?void 0:t.output)||null})}catch(e){throw{errorMessage:(null==e?void 0:e.message)||"Something went wrong while making this request. Please try again or contact support@codedamn.com",isNetworkError:!0}}if(!t)throw{errorMessage:"Something went wrong while making this request. Please try again or contact support@codedamn.com",isNetworkError:!1};if("ok"===t.status)return t.data;throw{...t,isNetworkError:!1}},q=async e=>{let{data:t,forceOverrideAuthToken:a,shouldEnableBatching:n=!0}=e;if(!n)return await z(t);{let e=R(t),n=(0,j.NZ)(t),l=(0,N.R9)()||null,r=(0,N.Qv)()||null,s=a||(0,D.gc)()||null;return await j.CX.fetch({batchingUniqueKey:n,organizationId:l,fermionSchoolId:r,authToken:s,data:e}).then(e=>e)}},L=async e=>{let{data:t,forceOverrideAuthToken:a,shouldEnableBatching:n=!0}=e;try{let e=await q({data:t,shouldEnableBatching:n,forceOverrideAuthToken:a});return{status:"ok",data:e}}catch(e){return{status:"error",errorMessage:(0,j.Lr)(e).errorMessage}}};(n=r||(r={})).Ai="Ai",n.User="User";var O=a(11756),W=a(16982),Z=a(22543),F=a(80834);(l=s||(s={})).CourseItem="CourseItem",l.DebugcodeAi="DebugcodeAi",l.PlaygroundSnippet="PlaygroundSnippet",l.PracticeProblem="PracticeProblem",l.Project="Project",l.Unknown="Unknown",l.UserOnboarding="UserOnboarding",l.FermionSchoolChatArea="FermionSchoolChatArea",F.z.object({authToken:F.z.string(),rawMessage:F.z.string().min(1),roomData:F.z.object({requestType:F.z.literal("new")}).or(F.z.object({requestType:F.z.literal("existing-room"),roomId:F.z.string()})),platformSpecificData:F.z.object({type:F.z.literal("fermion")}).or(F.z.object({type:F.z.literal("codedamn"),additionalData:F.z.object({creationSource:F.z.nativeEnum(s),courseItemSlug:F.z.string().or(F.z.null()),labSlug:F.z.string().or(F.z.null()),playgroundSnippetSlug:F.z.string().or(F.z.null())})}))});let H=F.z.object({status:F.z.literal("error"),error:F.z.string()}),Y=async e=>{var t,a;let{prompt:n,onConversationStart:l}=e,s=Z.k.getState().dynamicData;(0,W.k)(s,"dynamicData cannot be null");let{chatbotState:i,platformSpecificData:o,activeRoomId:d}=s,c=Z.k.getState().writeProperty;if("idle"!==i||!n.trim())return;c((0,y.U)(e=>{(0,W.k)(e.dynamicData,"state.dynamicData cannot be null"),e.dynamicData.chatbotState="api-call-in-progress",e.dynamicData.userMessageThatIsNotSentYet=n})),(0,W.k)(o,"platformSpecificData cannot be null here");let u=await fetch("/api/ai/stream",{method:"POST",body:JSON.stringify({roomData:null==d?{requestType:"new"}:{requestType:"existing-room",roomId:d},rawMessage:n,authToken:null!==(t=(0,D.gc)())&&void 0!==t?t:"",platformSpecificData:o}),headers:{"Content-Type":"application/json"}});if(400===u.status){try{let e=H.parse(await u.json()).error;window.alert(e)}catch(e){window.alert("Something went wrong")}c((0,y.U)(e=>{(0,W.k)(e.dynamicData,"state.dynamicData cannot be null"),e.dynamicData.chatbotState="idle",e.dynamicData.userMessageThatIsNotSentYet=null}))}else{null==l||l();let e=u.headers.get("x-room-id");null==d&&null!=e&&c((0,y.U)(t=>{(0,W.k)(t.dynamicData,"state.dynamicData cannot be null"),t.dynamicData.activeRoomId=e}));let t=null===(a=Z.k.getState().dynamicData)||void 0===a?void 0:a.activeRoomId;(0,W.k)(t,"activeRoomIdAgain cannot be null now"),c((0,y.U)(e=>{(0,W.k)(e.dynamicData,"state.dynamicData cannot be null"),e.dynamicData.chatbotState="api-call-in-progress",e.dynamicData.roomChatSessionMapping[t]=e.dynamicData.roomChatSessionMapping[t]||[];let a=e.dynamicData.roomChatSessionMapping[t];(0,W.k)(a),a.push({sender:r.User,message:n}),a.push({sender:r.Ai,message:""}),e.dynamicData.userMessageThatIsNotSentYet=null}));let s=u.body;if(!s)return;let i=s.getReader(),o="";async function m(e){let{done:t,value:a}=await i.read();if(t){c((0,y.U)(e=>{(0,W.k)(e.dynamicData,"state.dynamicData cannot be null"),e.dynamicData.chatbotState="idle"}));return}{let t=new TextDecoder().decode(a);if(!t.startsWith("data: [DONE]")){let n=t.split("\n").filter(e=>e.trim().length>0);for(let t=0;t<n.length;t++){let l=n[t];if(!l.startsWith("data: [DONE]"))try{let t=(o+l).replace(/^data: /,""),a=JSON.parse(t);o="",c((0,y.U)(t=>{(0,W.k)(t.dynamicData,"state.dynamicData cannot be null");try{var n;let l=t.dynamicData.roomChatSessionMapping[e];if(!l||0===l.length)return;l[l.length-1].message+=null!==(n=a.choices[0].delta.content)&&void 0!==n?n:""}catch(e){console.error("Error setting state",e,a)}}))}catch(e){console.error("Failed to parse text",e,l,a),o+=l}}}}return m(e)}return m(t)}};var K=a(3752);/**
 *  @file highlight-copy.js
 *  @author Arron Hunt <arronjhunt@gmail.com>
 *  @copyright Copyright 2021. All rights reserved.
 */class J{"after:highlightElement"(e){let{el:t,text:a}=e,n=Object.assign(document.createElement("button"),{innerHTML:"Copy",className:"hljs-copy-button"});n.dataset.copied="false",t.parentElement.classList.add("hljs-copy-wrapper"),t.parentElement.appendChild(n),t.parentElement.style.setProperty("--hljs-theme-background",window.getComputedStyle(t).backgroundColor),n.onclick=function(){null!=navigator.clipboard&&navigator.clipboard.writeText(a).then(function(){n.innerHTML="Copied!",n.dataset.copied="true";let e=Object.assign(document.createElement("div"),{role:"status",className:"hljs-copy-alert",innerHTML:"Copied to clipboard"});t.parentElement.appendChild(e),setTimeout(()=>{n.innerHTML="Copy",n.dataset.copied="false",t.parentElement.removeChild(e),e=null},2e3)})}}}h.Z.addPlugin(new J);let V=e=>{let{className:t,message:a,renderMode:n,shouldUpgradeToProSystemMessage:l,sender:s,index:d,chatSessionLength:u,shouldShowAiAvatar:m,forceMobileView:y}=e,b=(0,o.useId)(),v=(0,Z.k)(e=>{var t;return null===(t=e.dynamicData)||void 0===t?void 0:t.chatbotState});(0,W.k)(null!=v,"chatbotState cannot be null");let w="api-call-in-progress"===v&&s===r.Ai&&d===u-1;(0,o.useEffect)(()=>{w||document.querySelectorAll("[data-component-id='".concat(b,'\'] pre code[class^="language"]')).forEach(e=>{h.Z.highlightElement(e)})},[b,w]);let k="dark"===n?"text-gray-100":"text-gray-800";return(0,i.jsxs)("div",{"data-component-id":b,className:(0,g.default)(t,"instant-help-chat-message flex w-full",s===r.Ai?"justify-start":"justify-end"),children:[m&&s===r.Ai?(0,i.jsx)("div",{className:"flex-shrink-0 mr-2",children:(0,i.jsx)("div",{className:"bg-indigo-600 w-[32px] h-[32px] rounded-full flex justify-center items-center",children:(0,i.jsx)(f.aJO,{size:24})})}):null,(0,i.jsxs)("div",{className:"flex-shrink",children:[m&&s===r.Ai?(0,i.jsx)("p",{className:"text-xs opacity-70 mb-2",children:"Jarvis"}):null,(0,i.jsxs)("div",{className:(0,g.default)("relative rounded-3xl px-5 py-2.5 text-sm",s===r.Ai?"bg-transparent":"bg-[#2f2f2f]",y?"":"sm:max-w-3xl md:max-w-4xl",l?"dark"===n?"!bg-red-700":"!bg-red-300":""),children:[(0,i.jsx)("div",{children:(0,i.jsx)(c.U,{className:(0,g.default)("prose break-words prose-th:font-bold prose-th:!text-inherit inline !max-w-none",k,"dark"===n?"prose-invert":"","light"===n?"light-mode":"","light"===n?"!prose-pre:bg-gray-100":""),remarkPlugins:[p.Z],rehypePlugins:[O.Z],children:a})}),(0,i.jsx)("div",{className:(0,g.default)("mt-0.5 flex w-full items-end justify-end text-xs font-light opacity-60",k)})]}),l?(0,i.jsx)(x.z,{fullWidth:!0,className:"mt-2",href:"/pricing",target:"_blank",children:"\uD83D\uDE80 Upgrade to Pro"}):null]})]})},_=e=>{let{className:t,mode:a,renderMode:n,expandToFullScreen:l,close:r}=e,s=(0,Z.k)(e=>{var t;return null===(t=e.dynamicData)||void 0===t?void 0:t.screenTypeWhenEmbed});(0,W.k)(null!=s,"screenTypeWhenEmbed cannot be null");let o=(0,Z.k)(e=>e.writeProperty);return(0,i.jsxs)("div",{className:(0,g.default)("px-4 py-4","embedded"===a?"":"md:pb-4 md:pt-0","dark"===n?"text-gray-300":"text-gray-800",t),children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("h2",{className:"flex items-center justify-center text-xl font-bold",children:["single-chat"===s?(0,i.jsx)("span",{onClick:()=>{o((0,y.U)(e=>{(0,W.k)(e.dynamicData,"state.dynamicData cannot be null"),e.dynamicData.activeRoomId=null,e.dynamicData.screenTypeWhenEmbed="all-chats"}))},className:(0,g.default)("mr-2.5 cursor-pointer","embedded"===a?"":"hidden"),children:(0,i.jsx)(m.u1R,{})}):null,(0,i.jsx)("span",{className:"mr-2.5",children:"Ask Jarvis"})]}),(0,i.jsxs)("div",{className:"flex flex-row items-center space-x-2",children:["embedded"===a&&l?(0,i.jsx)(d.o3n,{onClick:()=>l(),title:"Expand to full screen",className:(0,g.default)("h-5 w-5 shrink-0 cursor-pointer")}):null,r?(0,i.jsx)(d.oHP,{onClick:()=>{r()},title:"Close window",className:(0,g.default)("h-5 w-5 shrink-0 cursor-pointer")}):null]})]}),(0,i.jsx)("div",{children:(0,i.jsx)("p",{className:(0,g.default)("mt-1 text-left text-xs","embedded"===a?"":"ml-0"),children:"Ask anything - question, code problem, doubt."})})]})},Q=e=>{let{intervalInMs:t}=e,[a,n]=(0,o.useState)("");return(0,o.useEffect)(()=>{let e=window.setInterval(()=>{n(e=>e.length>=3?"":e+".")},t);return()=>clearInterval(e)},[t]),(0,i.jsxs)("span",{className:"font-bold text-2xl",children:[".",a]})},X=e=>{let{shouldShowAiAvatar:t,defaultFirstWelcomeMessage:a,shouldHideInputFormBox:n,shouldHideHeader:l,close:s,expandToFullScreen:d,parentClassName:c,bottomFormClassName:m,headerClassName:h,renderMode:p,individualMessageDivClassName:f,mode:w,asideClassName:k,shouldAutofocusTextarea:j,mainClassName:D,courseItemSlug:N,projectSlug:S,playgroundSnippetSlug:T,componentInjectionAboveTextareaField:C,onAiMessage:A}=e,[U,E]=(0,o.useState)(""),[P,I]=(0,o.useState)(!1),R=(0,Z.k)(e=>{var t;return null===(t=e.dynamicData)||void 0===t?void 0:t.activeRoomId}),z=(0,Z.k)(e=>{var t;return null===(t=e.dynamicData)||void 0===t?void 0:t.amountOfUserChatRoomUniqueIdsToReveal}),q=(0,Z.k)(e=>{var t;return null===(t=e.dynamicData)||void 0===t?void 0:t.screenTypeWhenEmbed}),O=(0,Z.k)(e=>e.writeProperty),F=(0,Z.k)(e=>{var t;return null===(t=e.dynamicData)||void 0===t?void 0:t.chatbotState}),H=(0,Z.k)(e=>{var t;return null===(t=e.dynamicData)||void 0===t?void 0:t.stableActiveRoomRenderKey}),J=(0,Z.k)(e=>{var t;return null===(t=e.dynamicData)||void 0===t?void 0:t.allUserChatRoomUniqueIds});(0,W.k)(null!=J,"allUserChatRoomUniqueIds cannot be null"),(0,W.k)(null!=z,"amountOfUserChatRoomUniqueIdsToReveal cannot be null");let X=(0,Z.k)(e=>{var t;return R&&(null===(t=e.dynamicData)||void 0===t?void 0:t.roomChatSessionMapping[R])||[]}),B=(0,o.useRef)(null),{data:$}=M({});async function G(e){if(e.preventDefault(),""===U.trim()||(en(),"api-call-in-progress"===F))return;if(U.length>6e3){(0,K.A)("Please reduce the message length before sending");return}I(!0),await Y({prompt:U,onConversationStart:()=>{E(""),I(!1)}}),I(!1);let t=X.filter(e=>e.sender===r.Ai).at(-1);t&&(null==A||A(t.message))}(0,o.useEffect)(()=>{null!=$&&O((0,y.U)(e=>{(0,W.k)(e.dynamicData,"state.dynamicData cannot be null"),e.dynamicData.allUserChatRoomUniqueIds=$.previousRoomIdsForAiChat}))},[$,O]),(0,o.useEffect)(()=>{let e=N||S||T||"";H!==e&&O((0,y.U)(t=>{(0,W.k)(t.dynamicData,"state.dynamicData cannot be null"),t.dynamicData.activeRoomId=null,t.dynamicData.stableActiveRoomRenderKey=e}))},[N,T,S,H,O]);let ee="dark"===p?"bg-gray-900":"bg-white",et="dark"===p?"bg-gray-800":"bg-gray-100",ea="dark"===p?"text-gray-100":"text-gray-800";function en(){document.querySelectorAll(".disable-all-scroll-anchor").forEach(e=>{e.scrollTop=e.scrollHeight})}async function el(e){O((0,y.U)(t=>{(0,W.k)(t.dynamicData,"state.dynamicData cannot be null"),t.dynamicData.activeRoomId=e,t.dynamicData.screenTypeWhenEmbed="single-chat"}));let t=await L({data:{roomId:e}});"ok"===t.status&&O((0,y.U)(a=>{(0,W.k)(a.dynamicData,"state.dynamicData cannot be null"),e&&$&&(a.dynamicData.roomChatSessionMapping[e]=t.data.messages,a.dynamicData.chatbotState="idle")})),setTimeout(()=>{en()},(0,b.ms)("100ms"))}let er=(0,i.jsx)("button",{type:"button",onClick:()=>{O((0,y.U)(e=>{(0,W.k)(e.dynamicData,"state.dynamicData cannot be null"),e.dynamicData.activeRoomId=null,e.dynamicData.screenTypeWhenEmbed="single-chat"}))},className:"block w-full rounded-md border border-transparent bg-indigo-600 px-3 py-2 text-center text-sm font-medium leading-4 text-white shadow-sm hover:bg-indigo-700 disabled:cursor-not-allowed disabled:opacity-50",children:"Start New Chat"}),es=J.length>0?(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("p",{className:"mb-4 px-4 text-sm font-semibold",children:"Your previous conversations"}),(0,i.jsxs)("div",{className:(0,g.default)("divide-y","dark"===p?"divide-gray-700":"divide-gray-300"),children:[J.slice(0,z).map(e=>{let t=(0,u.ZP)(new Date(1e3*parseInt(e.slice(0,8),16)));return(0,i.jsx)("div",{onClick:()=>{el(e)},children:(0,i.jsxs)("div",{className:(0,g.default)("cursor-pointer px-4 py-1 transition-all hover:opacity-80",R===e?"".concat(et," opacity-100"):"opacity-60"),children:[(0,i.jsx)("span",{className:"block text-sm",children:t.format("Do MMMM YYYY")}),(0,i.jsxs)("span",{className:"block text-xs",children:["at ",t.format("hh:mm A")]})]})},e)}),z<J.length?(0,i.jsx)(x.z,{onClick:()=>{O((0,y.U)(e=>{(0,W.k)(e.dynamicData,"state.dynamicData cannot be null"),e.dynamicData.amountOfUserChatRoomUniqueIdsToReveal=z+5}))},intent:"primary",variant:"filled",size:"small",className:"m-4",children:"View More"}):null]})]}):null,ei=(0,i.jsxs)("aside",{className:(0,g.default)("block w-[250px] border-r flex-shrink-0 overflow-y-auto",k,"dark"===p?"border-gray-700":"border-gray-300"),children:[(0,i.jsx)("div",{className:"mx-4 py-4",children:er}),es]}),eo=(0,i.jsxs)("aside",{className:(0,g.default)("w-full flex-shrink-0 overflow-y-auto",k,"dark"===p?"border-gray-700":"border-gray-300"),children:[(0,i.jsx)("div",{className:"mx-4 py-4",children:er}),es]}),ed=(0,i.jsxs)("div",{className:(0,g.default)("shadow-xs mx-2 dark:shadow-xs relative flex flex-grow flex-col rounded-xl border border-gray-900/50 ".concat(et," py-[10px] ").concat(ea," md:py-4 md:pl-4")),children:[(0,i.jsx)("textarea",{minLength:1,rows:1,name:"ai-user-input-textarea",id:"ai-user-input-textarea",value:U,disabled:P,autoFocus:j,onKeyUp:e=>{let t=e.currentTarget;(null==t?void 0:t.id)==="ai-user-input-textarea"&&(t.style.height="1px",t.style.height="".concat(t.scrollHeight,"px"))},onKeyDown:e=>{if((13===e.keyCode||"Enter"===e.key)&&!e.shiftKey){var t;e.preventDefault(),null===(t=B.current)||void 0===t||t.requestSubmit()}},onChange:e=>{E(e.target.value)},className:"m-0 max-h-[200px] disabled:opacity-50 disabled:cursor-not-allowed w-full resize-none border-0 bg-transparent p-0 pl-3 pr-10 focus:ring-0 focus-visible:ring-0 dark:bg-transparent md:pl-0 md:pr-12",placeholder:"Ask anything"}),(0,i.jsx)("button",{type:"submit",disabled:""===U.trim()||"api-call-in-progress"===F||P,className:"absolute bottom-1.5 right-2 rounded-md p-1 text-white transition-colors enabled:bg-indigo-600 disabled:text-gray-400 disabled:opacity-40 dark:hover:".concat(ee," dark:disabled:hover:bg-transparent md:bottom-3 md:right-3 md:p-2"),children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"none",className:"m-1 h-4 w-4 md:m-0",strokeWidth:"2",children:(0,i.jsx)("path",{d:"M.5 1.163A1 1 0 0 1 1.97.28l12.868 6.837a1 1 0 0 1 0 1.766L1.969 15.72A1 1 0 0 1 .5 14.836V10.33a1 1 0 0 1 .816-.983L8.5 8 1.316 6.653A1 1 0 0 1 .5 5.67V1.163Z",fill:"currentColor"})})})]}),ec=(0,i.jsxs)("span",{className:(0,g.default)("mb-2 block text-right text-xs mx-2",U.length>6e3?"text-red-600":U.length>4500?"text-yellow-400":"text-gray-400"),children:[U.length,"/",6e3]}),{width:eu,height:em}=(0,v.Z)({heightType:"inner",widthType:"inner"}),eh=(0,Z.k)(e=>{var t;return null===(t=e.dynamicData)||void 0===t?void 0:t.userMessageThatIsNotSentYet});return(null!=eu&&null!=em&&(eu<768||em<500)&&(w="embedded",d=void 0),"embedded"!==w)?(0,i.jsxs)("div",{className:(0,g.default)("flex h-full transition-all",ee,ea,c),children:[ei,(0,i.jsxs)("main",{className:(0,g.default)("flex flex-grow flex-col p-6 pt-4",D),children:[l?null:(0,i.jsx)(_,{renderMode:p,mode:w,close:s,expandToFullScreen:d,className:(0,g.default)("block",h)}),(0,i.jsxs)("div",{className:"flex-grow flex flex-col overflow-y-auto disable-all-scroll-anchor space-y-4",children:[a?(0,i.jsx)(V,{shouldShowAiAvatar:t,renderMode:p,index:-1,message:a,sender:r.Ai,chatSessionLength:X.length},"default-message"):null,X.map((e,a)=>(0,i.jsx)(V,{shouldShowAiAvatar:t,renderMode:p,...e,index:a,chatSessionLength:X.length},a)),0===X.length?(0,i.jsx)("div",{className:"flex-grow"}):null,(0,i.jsx)("div",{id:"scroll-anchor"})]}),n?null:(0,i.jsxs)("form",{ref:B,className:(0,g.default)("flex-col relative bottom-auto bg-transparent pb-4",ee),onSubmit:G,children:[ec,ed]})]})]}):"all-chats"===q?(0,i.jsxs)("div",{className:(0,g.default)("flex h-full flex-col transition-all",ee,ea,c),"data-ai-box-scroll-to-end-when-embed":!0,children:[l?null:(0,i.jsx)(_,{renderMode:p,mode:w,close:s,expandToFullScreen:d,className:(0,g.default)("block",h)}),(0,i.jsx)("div",{className:(0,g.default)("flex flex-grow overflow-y-auto"),children:eo})]}):(0,i.jsxs)("div",{className:(0,g.default)("flex h-full flex-col transition-all",ee,ea,c),"data-ai-box-scroll-to-end-when-embed":!0,children:[l?null:(0,i.jsx)(_,{renderMode:p,mode:w,close:s,expandToFullScreen:d,className:(0,g.default)("block",h)}),(0,i.jsxs)("main",{className:(0,g.default)("flex-grow flex-col overflow-y-auto px-4 py-4 space-y-4",D,"disable-all-scroll-anchor"),children:[a?(0,i.jsx)(V,{shouldShowAiAvatar:t,renderMode:p,index:-1,className:(0,g.default)(f),message:a,sender:r.Ai,chatSessionLength:X.length},"default-message"):null,X.map((e,a)=>(0,i.jsx)(V,{shouldShowAiAvatar:t,renderMode:p,className:(0,g.default)(f),...e,index:a,chatSessionLength:X.length},a)),null==eh?null:(0,i.jsx)(V,{shouldShowAiAvatar:t,renderMode:p,index:-1,className:(0,g.default)(f,"opacity-50"),message:eh,sender:r.User,chatSessionLength:X.length}),null==eh?null:(0,i.jsx)("div",{className:(0,g.default)(f,"px-5"),children:(0,i.jsx)(Q,{intervalInMs:(0,b.ms)("200ms")})}),0===X.length?(0,i.jsx)("div",{className:"flex-grow"}):null,(0,i.jsx)("div",{id:"scroll-anchor"})]}),n?null:(0,i.jsxs)("form",{ref:B,className:(0,g.default)(m,"flex flex-col pb-6",ee),onSubmit:G,children:[ec,C,ed]})]})}},22543:function(e,t,a){"use strict";a.d(t,{k:function(){return s}});var n=a(52408),l=a(16064),r=a(96230);let s=(0,l.Ue)(e=>({dynamicData:null,activeRoomId:null,writeProperty:t=>{"function"==typeof t?e(e=>t(e)):e(t)}}));!r.Mw&&r.kc&&(0,n.y)("AiStore",s),s.getState().writeProperty},87942:function(e,t,a){"use strict";let n;var l=a(52983);let r={width:null,height:null};t.Z=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{heightType:"outer",widthType:"outer"},[t,a]=(0,l.useState)(()=>r);return(0,l.useEffect)(()=>{function l(e){let a=window["inner"===e.widthType?"innerWidth":"outerWidth"],n=window["inner"===e.heightType?"innerHeight":"outerHeight"];return t.width===a&&t.height===n?t:r={width:a,height:n}}let s={heightType:e.heightType,widthType:e.widthType};function i(){clearTimeout(n),n=window.setTimeout(()=>{a(l(s))},100)}return a(l(s)),window.addEventListener("resize",i),window.addEventListener("orientationchange",i),()=>{window.removeEventListener("resize",i),window.addEventListener("orientationchange",i)}},[e.heightType,e.widthType,t]),t}},86841:function(){}}]);